<!doctype html>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>SSSS Lockbox</title>
<script src="app-compiled.js"></script>
<style>
  #err-div { background-color: #ffc; color: #f00; padding: 0.5em;
    border: 1px dotted #f00 }
  html { font-family: sans-serif }
  body { max-width: 6in; margin: auto }
  h1, h2 { border-bottom: 1px solid }
  label, input { display: block }
</style>
<h1><abbr title="Shamir’s Secret Sharing Scheme">SSSS</abbr> Lockbox</h1>
<div id="err-div">
  <noscript><p>This page requires JavaScript to run.</noscript>
</div>
<div id="split-div">
  <h2>Split</h2>
  <div>
    <label for="k">Minimum number of keys required to recombine the message</label>
    <input type="text" id="k" value="3">
    <label for="n">Total number of keys to produce</label>
    <input type="text" id="n" value="5">
    <label for="input">Message</label>
    <textarea id="input">default message</textarea>
    <input type="button" value="Split" id="split">
  </div>
  <div id="split-output"></div>
</div>
<div id="combine-div">
  <h2>Combine</h2>
  <div>
    <label for="keys">Keys</label>
    <textarea id="keys"></textarea>
    <input type="button" value="Combine" id="combine">
  </div>
  <div id="combine-output"></div>
</div>
<div id="about-div">
  <h2>About</h2>
  <p>This is a pure JavaScript implementation of
    <a href="https://en.wikipedia.org/wiki/Shamir's_Secret_Sharing">Shamir’s
      Secret Sharing</a>. There is no server needed; all crypto is done in your
    browser. See the <a href="https://github.com/mrdomino/lockbox">github
      project page</a> for more information.
  <p>Written by <a href="https://www.google.com/profiles/mrdomino">mrdomino</a>.
</div>
<script>
try {
  document.getElementById('err-div').style.display = 'none';
  app.run();
} catch(e) {
  try {
    var errdiv = document.getElementById('err-div');
    var errmsg = typeof e.message == 'undefined' ? e : e.message;
    if (e instanceof ReferenceError && errmsg.indexOf('app') > -1) {
      errmsg += '. app-compiled.js may need to be built; try running make.';
    }
    errdiv.appendChild(document.createTextNode(errmsg));
    errdiv.style.display = 'block';
  } catch(e1) {
    alert('Something went really really wrong: ' + e1 +
          '\nOriginal error: ' + e);
  }
}
</script>
