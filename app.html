<!doctype html>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>SSSS Lockbox</title>
<script src="app-compiled.js"></script>
<style>
  #err-div { background-color: #ffc; color: #f00; padding: 0.5em;
    border: 1px dotted #f00 }
  html { font-family: sans-serif }
  body { max-width: 6in; margin: auto }
  h1, h2 { border-bottom: 1px solid }
  label, input { display: block }
</style>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-28049294-1']);
  _gaq.push(['_setDomainName', 'github.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<body>

<h1><abbr title="Shamir’s Secret Sharing Scheme">SSSS</abbr> Lockbox</h1>
<div id="warn-div">
  <h2>WARNING</h2>
  <p>This page is currently meant primarily for demo purposes. In particular,
  you shouldn’t assume that it’ll combine keys created on previous versions of
  the page—the message encoding and key formatting schemes are still under
  active development.
  <p>If you want to use this right now, the best thing to do is to check out a
  known revision of the <a
    href="https://github.com/mrdomino/lockbox">repository</a> and build it
  yourself. The second best thing to do is to make an offline copy of this page
  (“Save&nbsp;As…” → “Web&nbsp;Page,&nbsp;Complete” or similar) and distribute
  that along with your keys.
  <p>A more permanent implementation is “coming soon”.
</div>
<div id="err-div">
  <noscript><p>This page requires JavaScript to run.</p></noscript>
</div>
<div id="split-div">
  <h2>Split</h2>
  <div>
    <label for="split-k">Minimum number of keys required to recombine the
      message</label>
    <input type="text" id="split-k" value="3">
    <label for="split-n">Total number of keys to produce</label>
    <input type="text" id="split-n" value="5">
    <label for="split-input">Message</label>
    <textarea id="split-input">default message</textarea>
    <input type="button" value="Split" id="split">
  </div>
  <div id="split-output"></div>
</div>
<div id="combine-div">
  <h2>Combine</h2>
  <div>
    <label for="combine-k">Minimum number of keys required (defaults to number
      of keys entered)</label>
    <input type="text" id="combine-k">
    <label for="combine-keys">Keys</label>
    <textarea id="combine-keys"></textarea>
    <input type="button" value="Combine" id="combine">
  </div>
  <div id="combine-output"></div>
</div>
<div id="about-div">
  <h2>About</h2>
  <p>This is a pure JavaScript implementation of
    <a href="https://en.wikipedia.org/wiki/Shamir's_Secret_Sharing">Shamir’s
      Secret Sharing</a>. There is no server needed; all crypto is done in your
    browser. See the <a href="https://github.com/mrdomino/lockbox">github
      project page</a> for more information.
  <p>Written by <a href="https://www.google.com/profiles/mrdomino">mrdomino</a>.
</div>
<script>
try {
  document.getElementById('err-div').style.display = 'none';
  app.run();
} catch(e) {
  var errmsg = typeof e.message == 'undefined' ? e : e.message;
  if (e instanceof ReferenceError && errmsg.indexOf('app') > -1) {
    errmsg += '. app-compiled.js may need to be built; try running make.';
  }
  try {
    app.errFunc({message: errmsg});
  } catch(e1) {
    alert('Something went really really wrong: ' + e1 +
          '\nOriginal error: ' + errmsg);
  }
}
</script>
